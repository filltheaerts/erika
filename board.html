<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ERIKA — Board</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Noto+Sans+KR:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- NAV -->
  <nav class="nav" id="nav">
    <div class="container">
      <a href="index.html" class="nav-logo">ERIKA<span>.</span></a>
      <div class="nav-links" id="navLinks">
        <a href="index.html" data-i18n="nav.home">Home</a>
        <a href="project.html" data-i18n="nav.project">Project</a>
        <a href="qna.html" data-i18n="nav.qna">Q&A</a>
        <a href="board.html" class="active" data-i18n="nav.board">Board</a>
        <div class="lang-toggle">
          <button data-lang="ko">KR</button>
          <button class="active" data-lang="en">EN</button>
        </div>
      </div>
      <div class="nav-hamburger" id="hamburger">
        <span></span><span></span><span></span>
      </div>
    </div>
  </nav>

  <!-- PAGE HEADER -->
  <div class="page-header">
    <div class="container">
      <p class="section-label" data-i18n="board.label">Board</p>
      <h1 data-i18n="board.title">게시판</h1>
      <p data-i18n="board.desc">질문을 남기고, 과거 답변을 검색하세요. 해결된 질문은 삭제되지 않고 계속 열람 가능합니다.</p>
    </div>
  </div>

  <!-- BOARD SECTION -->
  <section class="section" style="background:var(--white); padding-top:24px;">
    <div class="container">

      <!-- Admin Bar -->
      <div class="admin-bar" id="adminBar">
        <p id="adminLabel">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle; margin-right:6px;"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" transform="scale(.67)"/></svg>
          <span data-i18n="board.admin.label">관리자 모드</span>
        </p>
        <button class="btn btn-sm btn-outline" onclick="BoardApp.logout()" data-i18n="board.admin.logout">로그아웃</button>
      </div>

      <!-- Toolbar -->
      <div class="board-toolbar">
        <div class="board-filters">
          <input type="text" id="boardSearch" placeholder="검색..." data-i18n-placeholder="board.search">
          <select id="filterCategory">
            <option value="all" data-i18n="board.filter.allCat">전체 카테고리</option>
            <option value="RH">RH</option>
            <option value="VV">VV</option>
            <option value="commercial">Commercial</option>
            <option value="user acquisition">User Acquisition</option>
          </select>
          <select id="filterStatus">
            <option value="all" data-i18n="board.filter.allStatus">전체 상태</option>
            <option value="Yes" data-i18n="board.filter.resolved">해결됨</option>
            <option value="No" data-i18n="board.filter.pending">미해결</option>
          </select>
          <input type="text" id="filterAnswerer" placeholder="답변자 검색..." data-i18n-placeholder="board.filter.answerer">
        </div>
        <div class="board-actions">
          <button class="btn btn-sm btn-outline" id="adminLoginBtn" onclick="BoardApp.showLogin()" data-i18n="board.loginBtn">관리자 로그인</button>
          <button class="btn btn-sm btn-primary" onclick="BoardApp.showWriteModal()" data-i18n="board.writeBtn">질문하기</button>
        </div>
      </div>

      <!-- Board Table -->
      <div class="board-table-wrap">
        <table class="board-table">
          <thead>
            <tr>
              <th style="width:50px">#</th>
              <th data-i18n="board.th.date">날짜</th>
              <th data-i18n="board.th.from">질문자</th>
              <th data-i18n="board.th.category">카테고리</th>
              <th data-i18n="board.th.question">질문</th>
              <th data-i18n="board.th.status">상태</th>
              <th data-i18n="board.th.answeredBy">답변자</th>
            </tr>
          </thead>
          <tbody id="boardTableBody">
          </tbody>
        </table>
      </div>

      <!-- Empty State -->
      <div class="empty-state hidden" id="boardEmpty">
        <svg viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="8" y="8" width="48" height="48" rx="8"/>
          <line x1="20" y1="24" x2="44" y2="24"/>
          <line x1="20" y1="32" x2="36" y2="32"/>
          <line x1="20" y1="40" x2="40" y2="40"/>
        </svg>
        <p data-i18n="board.empty">게시물이 없습니다.</p>
      </div>

      <!-- Pagination -->
      <div class="board-pagination" id="boardPagination"></div>

    </div>
  </section>

  <!-- ===== WRITE MODAL ===== -->
  <div class="modal-overlay" id="writeModal">
    <div class="modal">
      <div class="modal-header">
        <h3 data-i18n="board.write.title">새 질문 작성</h3>
        <button class="modal-close" onclick="BoardApp.closeModals()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="writeForm" onsubmit="BoardApp.submitQuestion(event)">
          <div class="form-row">
            <div class="form-group">
              <label data-i18n="board.write.name">이름 (닉네임)</label>
              <input type="text" id="writeFrom" required maxlength="50">
            </div>
            <div class="form-group">
              <label data-i18n="board.write.category">카테고리</label>
              <select id="writeCategory" required>
                <option value="RH">RH</option>
                <option value="VV">VV</option>
                <option value="commercial">Commercial</option>
                <option value="user acquisition">User Acquisition</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label data-i18n="board.write.question">질문</label>
            <textarea id="writeQuestion" required maxlength="2000" placeholder="질문 내용을 작성해주세요..." data-i18n-placeholder="board.write.qPlaceholder"></textarea>
          </div>
          <p style="font-size:.8rem; color:var(--text-muted); margin-bottom:16px;" data-i18n="board.write.notice">* 중복 질문은 기존 답변을 먼저 확인해주세요. 도매 관련 문의는 별도 문의 바랍니다.</p>
          <button type="submit" class="btn btn-primary" style="width:100%;" data-i18n="board.write.submit">질문 등록</button>
        </form>
      </div>
    </div>
  </div>

  <!-- ===== DETAIL MODAL ===== -->
  <div class="modal-overlay" id="detailModal">
    <div class="modal">
      <div class="modal-header">
        <h3 data-i18n="board.detail.title">질문 상세</h3>
        <button class="modal-close" onclick="BoardApp.closeModals()">&times;</button>
      </div>
      <div class="modal-body" id="detailContent">
      </div>
    </div>
  </div>

  <!-- ===== LOGIN MODAL ===== -->
  <div class="modal-overlay" id="loginModal">
    <div class="modal" style="max-width:420px;">
      <div class="modal-header">
        <h3 data-i18n="board.login.title">관리자 로그인</h3>
        <button class="modal-close" onclick="BoardApp.closeModals()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="loginForm" onsubmit="BoardApp.handleLogin(event)">
          <div class="form-group">
            <label data-i18n="board.login.id">아이디</label>
            <input type="text" id="loginId" required autocomplete="username">
          </div>
          <div class="form-group">
            <label data-i18n="board.login.pw">비밀번호</label>
            <input type="password" id="loginPw" required autocomplete="current-password">
          </div>
          <p id="loginError" style="color:#E53935; font-size:.85rem; margin-bottom:12px; display:none;" data-i18n="board.login.error">아이디 또는 비밀번호가 올바르지 않습니다.</p>
          <button type="submit" class="btn btn-primary" style="width:100%;" data-i18n="board.login.submit">로그인</button>
        </form>
      </div>
    </div>
  </div>

  <!-- ===== ANSWER MODAL (Admin) ===== -->
  <div class="modal-overlay" id="answerModal">
    <div class="modal">
      <div class="modal-header">
        <h3 data-i18n="board.answer.title">답변 작성</h3>
        <button class="modal-close" onclick="BoardApp.closeModals()">&times;</button>
      </div>
      <div class="modal-body">
        <div id="answerQuestionPreview" style="background:var(--bg); padding:16px; border-radius:var(--radius-sm); margin-bottom:20px;"></div>
        <form id="answerForm" onsubmit="BoardApp.submitAnswer(event)">
          <input type="hidden" id="answerPostId">
          <div class="form-row">
            <div class="form-group">
              <label data-i18n="board.answer.by">답변자</label>
              <input type="text" id="answerBy" required maxlength="50">
            </div>
            <div class="form-group">
              <label data-i18n="board.answer.status">해결 여부</label>
              <select id="answerResolved">
                <option value="Yes" data-i18n="board.answer.yes">해결됨</option>
                <option value="No" data-i18n="board.answer.no">미해결</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label data-i18n="board.answer.text">답변</label>
            <textarea id="answerText" required maxlength="5000" placeholder="답변 내용..." data-i18n-placeholder="board.answer.placeholder"></textarea>
          </div>
          <div class="form-group">
            <label>F/U</label>
            <input type="text" id="answerFollowUp" placeholder="후속 조치 사항 (선택)" data-i18n-placeholder="board.answer.fuPlaceholder">
          </div>
          <button type="submit" class="btn btn-primary" style="width:100%;" data-i18n="board.answer.submit">답변 등록</button>
        </form>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 ERIKA. All rights reserved.</p>
      <div class="footer-links">
        <a href="index.html" data-i18n="nav.home">Home</a>
        <a href="project.html" data-i18n="nav.project">Project</a>
        <a href="qna.html" data-i18n="nav.qna">Q&A</a>
        <a href="board.html" data-i18n="nav.board">Board</a>
      </div>
    </div>
  </footer>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/12.9.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore-compat.js"></script>
  <script src="js/firebase-config.js?v=2"></script>

  <script src="js/main.js?v=2"></script>
  <script src="js/board.js?v=2"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => BoardApp.init());
  </script>
</body>
</html>
